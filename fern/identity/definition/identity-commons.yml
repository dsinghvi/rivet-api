# yaml-language-server: $schema=https://raw.githubusercontent.com/fern-api/fern/main/fern.schema.json

imports:
  commons: commons.yml
  game-c: game-commons.yml
  party-c: party-commons.yml

types:
  IdentityExternalLinks:  
    docs: External links for an identity.
    properties:
      profile: 
        type: string
        docs: A link to this identity's profile page.
      settings: 
        type: optional<string>
        docs: A link to the Rivet settings page.
      chat:   
        type: optional<string>
        docs: A link to a chat page with the given identity.

  IdentityHandle:
    properties:
      identity_id: uuid
      display_name: commons.DisplayName
      account_number: commons.AccountNumber
      avatar_url:
        type: string
        docs: The URL of this identity's avatar image.
      presence: optional<IdentityPresence>
      party: party-c.PartyHandle
      is_registered:
        type: boolean
        docs: Whether or not this identity is registered with a linked account.
      external:
        type: IdentityExternalLinks
        docs: External links for an identity.

  IdentityPresence: 
    docs: Information about the identity's current status, party, and active game.
    properties:
      update_ts: datetime 
      status: IdentityStatus
      game_activity: optional<IdentityGameActivity>

  IdentityStatus:
    enum:
      - name: ONLINE
        value: online
      - name: AWAY
        value: away
      - name: offline
        value: offline

  IdentityGameActivity:
    docs: The game an identity is currently participating in.
    properties:
      game: game-c.GameHandle
      message: 
        type: string
        docs: A short activity message about the current game activity.
      public_metadata: 
        type: unknown
        docs: JSON data seen by anyone.
      mutual_metadata: 
        type: unknown
        docs: JSON data seen only by the given identity and their mutual followers.  