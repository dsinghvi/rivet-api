# yaml-language-server: $schema=https://raw.githubusercontent.com/fern-api/fern/main/fern.schema.json



types:
  IdentityHandle:
    properties:
      identity_id: uuid
      display_name: DisplayName
      account_number: AccountNumber
      avatar_url: string
      presence: optional<IdentityPresence>
      party: partyCommons.PartyHandle
      is_registered: boolean
      external: IdentityExternalLinks
  
  IdentityPresence:
    docs: Information about the identity's current status, party, and active game.
    properties:
      update_ts: datetime
      status: IdentityStatus
      game_activity: optional<IdentityGameActivity>

  IdentityStatus:
    docs:
      The current status of an identity. This helps players understand if another
      player is currently playing or has their game in the background.
    enum:
      - name: ONLINE
        value: online
      - name: AWAY
        value: away
      - name: offline
        value: offline

  GameHandle:
    properties:
      game_id: uuid 
      name_id: Identifier
      display_name: DisplayName
      logo_url:
        type: optional<string>
        docs: The URL of this game's logo image.
      banner_url:
        type: optional<string>
        docs: The URL of this game's banner image.

  Identifier: 
    type: string 
    docs: A human readable short identifier used to references resources.
      Different than a `rivet.common#Uuid` because this is intended to be human readable.
      Different than `rivet.common#DisplayName` because this should not include special characters and be short.
  Bio:
    type: string
    docs: Follows regex ^(?:[^\n\r]+\n?|\n){1,5}$

  JWT:
    type: string 
    docs: Documentation at https://jwt.io/
  
  WatchQuery: 
    type: string
    docs: A query parameter denoting the requests watch index.

  WatchResponse:
    docs: Provided by watchable endpoints used in blocking loops.
    properties:
      index: 
        type: string
        docs: | 
          Index indicating the version of the data responded.
          Pass this to `rivet.common#WatchQuery` to block and wait for the next response.

  DisplayName: string

  AccountNumber: integer

  ErrorMetadata:
    docs: Unstructured metadata relating to an error. Must be manually parsed.
    type: unknown

  BaseError:
    properties:
      code: string
      message: string
      metadata: optional<ErrorMetadata>

  BadRequestErrorResponseContent:
    extends: BaseError

  NotFoundErrorResponseContent:
    extends: BaseError

  UnauthorizedErrorResponseContent:
    extends: BaseError

  ForbiddenErrorResponseContent:
    extends: BaseError

  RateLimitErrorResponseContent:
    extends: BaseError

  InternalErrorResponseContent:
    extends: BaseError

  ValidationErrors: 
    docs: An error given by failed content validation.
    properties:
      path: ValidationErrorPath

  ValidationErrorPath: 
    docs: A list of strings denoting the origin of a validation error.
    type: string 

errors:
  BadRequestError:
    docs: An error thrown when the requestee has sent an invalid or malformed
      request.
    type: BadRequestErrorResponseContent
    status-code: 400

  ForbiddenError:
    docs: An error thrown when the requestee requests a resource they do not have
      access to.
    type: ForbiddenErrorResponseContent
    status-code: 403

  NotFoundError:
    docs: An error thrown when the requestee requests a non existant resource.
    type: NotFoundErrorResponseContent
    status-code: 404

  UnauthorizedError:
    docs: An error thrown when the requestee is not authenticated.
    type: UnauthorizedErrorResponseContent
    status-code: 408

  RateLimitError:
    docs: An error thrown when the requestee has hit a rate limit. You are sending
      too many requests too quickly.
    type: RateLimitErrorResponseContent
    status-code: 429

  InternalError:
    docs: An error caused by internal server problems.
    type: InternalErrorResponseContent
    status-code: 500
  

